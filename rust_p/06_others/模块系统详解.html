<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Rust 模块系统：单文件 vs 文件夹模块 | X-Lang</title><meta name="description" content="X-Lang: Code Smarter, in Every Language.">
    <link rel="preload" href="/x-lang/assets/style-B3-VMakp.css" as="style"><link rel="stylesheet" href="/x-lang/assets/style-B3-VMakp.css">
    <link rel="modulepreload" href="/x-lang/assets/app-WzcM213c.js"><link rel="modulepreload" href="/x-lang/assets/模块系统详解.html-DY6bo69Q.js">
    <link rel="prefetch" href="/x-lang/assets/index.html-B2siAs7W.js" as="script"><link rel="prefetch" href="/x-lang/assets/index.html-Ct6QxUzD.js" as="script"><link rel="prefetch" href="/x-lang/assets/01_environment.html-D1fL_jqt.js" as="script"><link rel="prefetch" href="/x-lang/assets/02_variables_types.html-BmiEJ1Bj.js" as="script"><link rel="prefetch" href="/x-lang/assets/03_control_flow.html-A8hUj0Pt.js" as="script"><link rel="prefetch" href="/x-lang/assets/04_functions.html-f8I0OP4v.js" as="script"><link rel="prefetch" href="/x-lang/assets/01_ownership.html-CRoCEPqb.js" as="script"><link rel="prefetch" href="/x-lang/assets/02_borrowing.html-B7xp1ev4.js" as="script"><link rel="prefetch" href="/x-lang/assets/01_structs_enums.html-LdID-277.js" as="script"><link rel="prefetch" href="/x-lang/assets/02_collections.html-Ds1byo85.js" as="script"><link rel="prefetch" href="/x-lang/assets/01_error_handling.html-BEqF59Lp.js" as="script"><link rel="prefetch" href="/x-lang/assets/02_modules_packages.html-C1p_7CJQ.js" as="script"><link rel="prefetch" href="/x-lang/assets/03_std_library_guide.html-ChLXr3fo.js" as="script"><link rel="prefetch" href="/x-lang/assets/01_calculator.html-CGJdt9pH.js" as="script"><link rel="prefetch" href="/x-lang/assets/02_file_processor.html-DiMiS9mp.js" as="script"><link rel="prefetch" href="/x-lang/assets/03_web_server.html-8mUg2UM6.js" as="script"><link rel="prefetch" href="/x-lang/assets/01_1过程宏.html-tTmy0kCp.js" as="script"><link rel="prefetch" href="/x-lang/assets/01_2派生宏.html-D1_ZdORP.js" as="script"><link rel="prefetch" href="/x-lang/assets/02_声明宏.html-BBmhDVIo.js" as="script"><link rel="prefetch" href="/x-lang/assets/Attribute语法.html-jaTtHbhv.js" as="script"><link rel="prefetch" href="/x-lang/assets/OnceLock和OnceCell.html-xnx4uSV4.js" as="script"><link rel="prefetch" href="/x-lang/assets/mod_rs和lib_rs的区别.html-CBHSW1uF.js" as="script"><link rel="prefetch" href="/x-lang/assets/可见性修饰符对比.html-BRXY5TwU.js" as="script"><link rel="prefetch" href="/x-lang/assets/uniffi__export.html-BFkgJZVD.js" as="script"><link rel="prefetch" href="/x-lang/assets/01_tokio_intro.html-DZi8tRvm.js" as="script"><link rel="prefetch" href="/x-lang/assets/02_async_basics.html-WBHDavJh.js" as="script"><link rel="prefetch" href="/x-lang/assets/03_tokio_runtime.html-BYsm7zlR.js" as="script"><link rel="prefetch" href="/x-lang/assets/04_tokio_vs_others.html-bhI0LqRA.js" as="script"><link rel="prefetch" href="/x-lang/assets/05_projects.html-DL-x2NmQ.js" as="script"><link rel="prefetch" href="/x-lang/assets/index.html-DYIGJVtN.js" as="script"><link rel="prefetch" href="/x-lang/assets/index.html-DfalU3op.js" as="script"><link rel="prefetch" href="/x-lang/assets/basic_exercises.html-ChnlXsbq.js" as="script"><link rel="prefetch" href="/x-lang/assets/404.html-Wz41JpZm.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/x-lang/"><img class="vp-site-logo" src="/x-lang/images/logo.png" alt="X-Lang"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">X-Lang</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/x-lang/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/x-lang/rust_p/" aria-label="Rust 语言入门教程"><!--[--><!--[--><!--]--><!--]-->Rust 语言入门教程<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/x-lang/" aria-label="Home"><!--[--><!--[--><!--]--><!--]-->Home<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/x-lang/rust_p/" aria-label="Rust 语言入门教程"><!--[--><!--[--><!--]--><!--]-->Rust 语言入门教程<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Rust 模块系统：单文件 vs 文件夹模块 <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="rust-模块系统-单文件-vs-文件夹模块" tabindex="-1"><a class="header-anchor" href="#rust-模块系统-单文件-vs-文件夹模块"><span>Rust 模块系统：单文件 vs 文件夹模块</span></a></h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>Rust 的模块系统有两种组织方式：</p><ol><li><strong>单文件模块</strong>：一个 <code>.rs</code> 文件就是一个模块</li><li><strong>文件夹模块</strong>：一个文件夹代表一个模块，使用 <code>mod.rs</code> 或同名文件</li></ol><h2 id="一、单文件模块" tabindex="-1"><a class="header-anchor" href="#一、单文件模块"><span>一、单文件模块</span></a></h2><h3 id="基本结构" tabindex="-1"><a class="header-anchor" href="#基本结构"><span>基本结构</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_project/</span>
<span class="line">├── Cargo.toml</span>
<span class="line">└── src/</span>
<span class="line">    ├── main.rs</span>
<span class="line">    ├── utils.rs          ← 单文件模块</span>
<span class="line">    └── database.rs       ← 单文件模块</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用方式" tabindex="-1"><a class="header-anchor" href="#使用方式"><span>使用方式</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/main.rs</span></span>
<span class="line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">utils</span><span class="token punctuation">;</span>      <span class="token comment">// 声明模块（告诉编译器去找 utils.rs）</span></span>
<span class="line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">database</span><span class="token punctuation">;</span>   <span class="token comment">// 声明模块</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token namespace">utils<span class="token punctuation">::</span></span><span class="token function">helper_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token namespace">database<span class="token punctuation">::</span></span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/utils.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">helper_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;这是工具函数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">another_helper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;另一个工具函数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/database.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;连接数据库&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;执行查询: {}&quot;</span><span class="token punctuation">,</span> sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>特点</strong>：</p><ul><li>✅ 简单直接</li><li>✅ 适合小模块</li><li>✅ 一个文件对应一个模块</li><li>❌ 不适合复杂的子模块结构</li></ul><hr><h2 id="二、文件夹模块-使用-mod-rs" tabindex="-1"><a class="header-anchor" href="#二、文件夹模块-使用-mod-rs"><span>二、文件夹模块（使用 mod.rs）</span></a></h2><h3 id="基本结构-1" tabindex="-1"><a class="header-anchor" href="#基本结构-1"><span>基本结构</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_project/</span>
<span class="line">├── Cargo.toml</span>
<span class="line">└── src/</span>
<span class="line">    ├── main.rs</span>
<span class="line">    └── network/          ← 文件夹模块</span>
<span class="line">        ├── mod.rs        ← 模块入口（类似 Python 的 __init__.py）</span>
<span class="line">        ├── tcp.rs</span>
<span class="line">        ├── udp.rs</span>
<span class="line">        └── http.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="文件内容" tabindex="-1"><a class="header-anchor" href="#文件内容"><span>文件内容</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/main.rs</span></span>
<span class="line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">network</span><span class="token punctuation">;</span>  <span class="token comment">// 声明模块（编译器会找 network/mod.rs）</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token namespace">network<span class="token punctuation">::</span>tcp<span class="token punctuation">::</span></span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token namespace">network<span class="token punctuation">::</span>http<span class="token punctuation">::</span></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/network/mod.rs - 模块入口</span></span>
<span class="line"><span class="token comment">// 声明子模块</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">tcp</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">udp</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">http</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 可以在这里定义公共功能</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;网络模块初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 可以重新导出（re-export）</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">tcp<span class="token punctuation">::</span></span><span class="token class-name">TcpConnection</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">http<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Request</span><span class="token punctuation">,</span> <span class="token class-name">Response</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/network/tcp.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">TcpConnection</span> <span class="token punctuation">{</span></span>
<span class="line">    address<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">impl</span> <span class="token class-name">TcpConnection</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span>addr<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">TcpConnection</span> <span class="token punctuation">{</span></span>
<span class="line">            address<span class="token punctuation">:</span> addr<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;TCP 连接&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/network/http.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">Request</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> url<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">Response</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> status<span class="token punctuation">:</span> <span class="token keyword">u16</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;HTTP GET 请求&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>特点</strong>：</p><ul><li>✅ 适合复杂模块</li><li>✅ 清晰的层次结构</li><li>✅ 可以有多层嵌套</li><li>✅ <code>mod.rs</code> 作为模块入口</li></ul><hr><h2 id="三、现代方式-rust-2018-同名文件" tabindex="-1"><a class="header-anchor" href="#三、现代方式-rust-2018-同名文件"><span>三、现代方式（Rust 2018+）：同名文件</span></a></h2><p>Rust 2018 引入了新的方式，不再必须使用 <code>mod.rs</code>。</p><h3 id="基本结构-2" tabindex="-1"><a class="header-anchor" href="#基本结构-2"><span>基本结构</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_project/</span>
<span class="line">├── Cargo.toml</span>
<span class="line">└── src/</span>
<span class="line">    ├── main.rs</span>
<span class="line">    ├── network.rs        ← 模块文件（代替 network/mod.rs）</span>
<span class="line">    └── network/          ← 子模块文件夹</span>
<span class="line">        ├── tcp.rs</span>
<span class="line">        ├── udp.rs</span>
<span class="line">        └── http.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="文件内容-1" tabindex="-1"><a class="header-anchor" href="#文件内容-1"><span>文件内容</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/main.rs</span></span>
<span class="line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">network</span><span class="token punctuation">;</span>  <span class="token comment">// 编译器会找 network.rs</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token namespace">network<span class="token punctuation">::</span>tcp<span class="token punctuation">::</span></span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/network.rs - 模块定义（代替 mod.rs）</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">tcp</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">udp</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">http</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;网络模块初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/network/tcp.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;TCP 连接&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>对比</strong>：</p><table><thead><tr><th>方式</th><th>Rust 2015</th><th>Rust 2018+</th></tr></thead><tbody><tr><td>模块入口</td><td><code>network/mod.rs</code></td><td><code>network.rs</code></td></tr><tr><td>子模块</td><td><code>network/*.rs</code></td><td><code>network/*.rs</code></td></tr><tr><td>推荐度</td><td>旧方式</td><td>✅ 推荐</td></tr></tbody></table><hr><h2 id="四、完整示例对比" tabindex="-1"><a class="header-anchor" href="#四、完整示例对比"><span>四、完整示例对比</span></a></h2><h3 id="方式-1-使用-mod-rs-传统" tabindex="-1"><a class="header-anchor" href="#方式-1-使用-mod-rs-传统"><span>方式 1：使用 mod.rs（传统）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">src/</span>
<span class="line">├── main.rs</span>
<span class="line">└── api/</span>
<span class="line">    ├── mod.rs        ← 模块入口</span>
<span class="line">    ├── users.rs</span>
<span class="line">    ├── posts.rs</span>
<span class="line">    └── auth/</span>
<span class="line">        ├── mod.rs    ← 子模块入口</span>
<span class="line">        ├── login.rs</span>
<span class="line">        └── logout.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api/mod.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">users</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">posts</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">auth</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init_api</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;API 初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api/auth/mod.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">login</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">logout</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init_auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;认证模块初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="方式-2-使用同名文件-现代" tabindex="-1"><a class="header-anchor" href="#方式-2-使用同名文件-现代"><span>方式 2：使用同名文件（现代）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">src/</span>
<span class="line">├── main.rs</span>
<span class="line">├── api.rs            ← 代替 api/mod.rs</span>
<span class="line">├── api/</span>
<span class="line">│   ├── users.rs</span>
<span class="line">│   ├── posts.rs</span>
<span class="line">│   ├── auth.rs       ← 代替 api/auth/mod.rs</span>
<span class="line">│   └── auth/</span>
<span class="line">│       ├── login.rs</span>
<span class="line">│       └── logout.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api.rs（代替 api/mod.rs）</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">users</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">posts</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">auth</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init_api</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;API 初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api/auth.rs（代替 api/auth/mod.rs）</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">login</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">logout</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init_auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;认证模块初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>推荐使用方式 2</strong>，因为：</p><ul><li>✅ 更清晰：文件名就是模块名</li><li>✅ 避免多个 <code>mod.rs</code> 混淆</li><li>✅ 编辑器中更容易识别</li></ul><hr><h2 id="五、rust-vs-python-对比" tabindex="-1"><a class="header-anchor" href="#五、rust-vs-python-对比"><span>五、Rust vs Python 对比</span></a></h2><h3 id="python-的模块系统" tabindex="-1"><a class="header-anchor" href="#python-的模块系统"><span>Python 的模块系统</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_project/</span>
<span class="line">├── main.py</span>
<span class="line">└── network/</span>
<span class="line">    ├── __init__.py    ← 包初始化文件</span>
<span class="line">    ├── tcp.py</span>
<span class="line">    ├── http.py</span>
<span class="line">    └── auth/</span>
<span class="line">        ├── __init__.py</span>
<span class="line">        ├── login.py</span>
<span class="line">        └── logout.py</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># main.py</span></span>
<span class="line"><span class="token keyword">from</span> network <span class="token keyword">import</span> tcp</span>
<span class="line"><span class="token keyword">from</span> network<span class="token punctuation">.</span>auth <span class="token keyword">import</span> login</span>
<span class="line"></span>
<span class="line">tcp<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">login<span class="token punctuation">.</span>authenticate<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># network/__init__.py</span></span>
<span class="line"><span class="token comment"># 初始化代码</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;网络模块加载&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 可以重新导出</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>tcp <span class="token keyword">import</span> connect</span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>http <span class="token keyword">import</span> get</span>
<span class="line"></span>
<span class="line">__all__ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;connect&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># network/tcp.py</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;TCP 连接&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="rust-的模块系统-对应设计" tabindex="-1"><a class="header-anchor" href="#rust-的模块系统-对应设计"><span>Rust 的模块系统（对应设计）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_project/</span>
<span class="line">├── main.rs</span>
<span class="line">└── network/</span>
<span class="line">    ├── mod.rs         ← 对应 __init__.py</span>
<span class="line">    ├── tcp.rs</span>
<span class="line">    ├── http.rs</span>
<span class="line">    └── auth/</span>
<span class="line">        ├── mod.rs     ← 对应 __init__.py</span>
<span class="line">        ├── login.rs</span>
<span class="line">        └── logout.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// main.rs</span></span>
<span class="line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">network</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">use</span> <span class="token namespace">network<span class="token punctuation">::</span></span>tcp<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token namespace">network<span class="token punctuation">::</span>auth<span class="token punctuation">::</span></span>login<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token namespace">tcp<span class="token punctuation">::</span></span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token namespace">login<span class="token punctuation">::</span></span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// network/mod.rs - 对应 __init__.py</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">tcp</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">http</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">auth</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 初始化代码</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;网络模块加载&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 重新导出（对应 __all__）</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">tcp<span class="token punctuation">::</span></span>connect<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">http<span class="token punctuation">::</span></span>get<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// network/tcp.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;TCP 连接&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="详细对比表" tabindex="-1"><a class="header-anchor" href="#详细对比表"><span>详细对比表</span></a></h3><table><thead><tr><th>特性</th><th>Python</th><th>Rust (mod.rs)</th><th>Rust (现代)</th></tr></thead><tbody><tr><td><strong>包/模块入口</strong></td><td><code>__init__.py</code></td><td><code>mod.rs</code></td><td><code>模块名.rs</code></td></tr><tr><td><strong>必需性</strong></td><td>可选（Python 3.3+）</td><td>必需</td><td>必需</td></tr><tr><td><strong>导入语法</strong></td><td><code>import</code> / <code>from...import</code></td><td><code>mod</code> + <code>use</code></td><td><code>mod</code> + <code>use</code></td></tr><tr><td><strong>重新导出</strong></td><td><code>__all__</code></td><td><code>pub use</code></td><td><code>pub use</code></td></tr><tr><td><strong>可见性</strong></td><td>默认公开</td><td>默认私有</td><td>默认私有</td></tr><tr><td><strong>编译时检查</strong></td><td>❌</td><td>✅</td><td>✅</td></tr><tr><td><strong>相对导入</strong></td><td><code>from .module</code></td><td><code>use super::</code></td><td><code>use super::</code></td></tr></tbody></table><hr><h2 id="六、复杂项目实例" tabindex="-1"><a class="header-anchor" href="#六、复杂项目实例"><span>六、复杂项目实例</span></a></h2><h3 id="rust-项目结构" tabindex="-1"><a class="header-anchor" href="#rust-项目结构"><span>Rust 项目结构</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_web_app/</span>
<span class="line">├── Cargo.toml</span>
<span class="line">└── src/</span>
<span class="line">    ├── main.rs</span>
<span class="line">    ├── lib.rs               ← 库入口</span>
<span class="line">    ├── config.rs            ← 单文件模块</span>
<span class="line">    ├── models.rs            ← 模块文件</span>
<span class="line">    ├── models/              ← 子模块文件夹</span>
<span class="line">    │   ├── user.rs</span>
<span class="line">    │   ├── post.rs</span>
<span class="line">    │   └── comment.rs</span>
<span class="line">    ├── api.rs</span>
<span class="line">    ├── api/</span>
<span class="line">    │   ├── users.rs</span>
<span class="line">    │   ├── posts.rs</span>
<span class="line">    │   └── auth.rs</span>
<span class="line">    └── database.rs</span>
<span class="line">    └── database/</span>
<span class="line">        ├── connection.rs</span>
<span class="line">        └── migrations.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="各文件内容" tabindex="-1"><a class="header-anchor" href="#各文件内容"><span>各文件内容</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/lib.rs - 库的根模块</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">config</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">models</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">api</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">database</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 重新导出常用项</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">models<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">User</span><span class="token punctuation">,</span> <span class="token class-name">Post</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">api<span class="token punctuation">::</span>users<span class="token punctuation">::</span></span>create_user<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">database<span class="token punctuation">::</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/main.rs - 可执行文件</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token namespace">my_web_app<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">User</span><span class="token punctuation">,</span> create_user<span class="token punctuation">,</span> <span class="token class-name">Connection</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">let</span> conn <span class="token operator">=</span> <span class="token class-name">Connection</span><span class="token punctuation">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/models.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">user</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">post</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">comment</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 重新导出</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">user<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">post<span class="token punctuation">::</span></span><span class="token class-name">Post</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">comment<span class="token punctuation">::</span></span><span class="token class-name">Comment</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/models/user.rs</span></span>
<span class="line"><span class="token attribute attr-name">#[derive(Debug, Clone)]</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> id<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">pub</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">impl</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">            id<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">            name<span class="token punctuation">:</span> name<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">users</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">posts</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">auth</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;API 初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api/users.rs</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">create_user</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">User</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">get_user</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">User</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line">    <span class="token class-name">None</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="七、路径和导入" tabindex="-1"><a class="header-anchor" href="#七、路径和导入"><span>七、路径和导入</span></a></h2><h3 id="绝对路径-vs-相对路径" tabindex="-1"><a class="header-anchor" href="#绝对路径-vs-相对路径"><span>绝对路径 vs 相对路径</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api/users.rs</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ❌ 不推荐：绝对路径（从 crate 根开始）</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models<span class="token punctuation">::</span>user<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>database<span class="token punctuation">::</span>connection<span class="token punctuation">::</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ✅ 推荐：使用 crate:: 从根开始</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>database<span class="token punctuation">::</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ✅ 相对路径：从当前模块开始</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">super</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>auth<span class="token punctuation">::</span></span>authenticate<span class="token punctuation">;</span>  <span class="token comment">// 上一级的 auth 模块</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">super</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>super<span class="token punctuation">::</span>models<span class="token punctuation">::</span></span><span class="token class-name">Post</span><span class="token punctuation">;</span> <span class="token comment">// 上两级的 models</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 当前模块内</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">self</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>helpers<span class="token punctuation">::</span></span>format_response<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="python-对比" tabindex="-1"><a class="header-anchor" href="#python-对比"><span>Python 对比</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># network/auth/login.py</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 绝对导入</span></span>
<span class="line"><span class="token keyword">from</span> network<span class="token punctuation">.</span>tcp <span class="token keyword">import</span> connect</span>
<span class="line"><span class="token keyword">from</span> network<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>helpers <span class="token keyword">import</span> validate</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 相对导入</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span>tcp <span class="token keyword">import</span> connect        <span class="token comment"># 上一级</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>helpers <span class="token keyword">import</span> validate    <span class="token comment"># 当前级</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>utils <span class="token keyword">import</span> log         <span class="token comment"># 上两级</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="rust-路径关键字" tabindex="-1"><a class="header-anchor" href="#rust-路径关键字"><span>Rust 路径关键字</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// crate:: - 从当前 crate 的根开始</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// super:: - 父模块</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">super</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>auth<span class="token punctuation">::</span></span><span class="token class-name">Token</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// self:: - 当前模块</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">self</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>helpers<span class="token punctuation">::</span></span>format<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="八、可见性控制" tabindex="-1"><a class="header-anchor" href="#八、可见性控制"><span>八、可见性控制</span></a></h2><h3 id="rust-的精细控制" tabindex="-1"><a class="header-anchor" href="#rust-的精细控制"><span>Rust 的精细控制</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/models/user.rs</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 公开给所有人</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> id<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">,</span>              <span class="token comment">// 公开字段</span></span>
<span class="line">    <span class="token keyword">pub</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>         <span class="token comment">// 公开字段</span></span>
<span class="line">    email<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>            <span class="token comment">// 私有字段（默认）</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 仅在当前 crate 内公开</span></span>
<span class="line"><span class="token keyword">pub</span><span class="token punctuation">(</span><span class="token keyword">crate</span><span class="token punctuation">)</span> <span class="token keyword">fn</span> <span class="token function-definition function">internal_helper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 只能在当前 crate 内使用</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 仅在父模块中公开</span></span>
<span class="line"><span class="token keyword">pub</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">)</span> <span class="token keyword">fn</span> <span class="token function-definition function">parent_only</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 只能在父模块使用</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 仅在指定路径中公开</span></span>
<span class="line"><span class="token keyword">pub</span><span class="token punctuation">(</span><span class="token keyword">in</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models</span><span class="token punctuation">)</span> <span class="token keyword">fn</span> <span class="token function-definition function">models_only</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 只能在 models 模块内使用</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 完全私有</span></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">private_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 只能在当前文件内使用</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="python-的约定" tabindex="-1"><a class="header-anchor" href="#python-的约定"><span>Python 的约定</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># network/tcp.py</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># &quot;公开&quot; - 无前缀</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># &quot;内部&quot; - 单下划线（约定，不强制）</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">_internal_helper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># &quot;私有&quot; - 双下划线（名称改写）</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">__private</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># __all__ 控制 from module import * 的内容</span></span>
<span class="line">__all__ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;connect&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>关键区别</strong>：</p><ul><li>Rust：编译时强制检查</li><li>Python：运行时约定（不强制）</li></ul><hr><h2 id="九、最佳实践" tabindex="-1"><a class="header-anchor" href="#九、最佳实践"><span>九、最佳实践</span></a></h2><h3 id="✅-推荐做法" tabindex="-1"><a class="header-anchor" href="#✅-推荐做法"><span>✅ 推荐做法</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// 1. 使用现代模块系统（同名文件而非 mod.rs）</span></span>
<span class="line">src<span class="token operator">/</span></span>
<span class="line">├── api<span class="token punctuation">.</span>rs          ← 而不是 api<span class="token operator">/</span><span class="token keyword">mod</span><span class="token punctuation">.</span>rs</span>
<span class="line">└── api<span class="token operator">/</span></span>
<span class="line">    └── users<span class="token punctuation">.</span>rs</span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2. 在模块文件中重新导出常用项</span></span>
<span class="line"><span class="token comment">// src/models.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">user</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">post</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">user<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">post<span class="token punctuation">::</span></span><span class="token class-name">Post</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3. 使用 prelude 模式简化导入</span></span>
<span class="line"><span class="token comment">// src/prelude.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">User</span><span class="token punctuation">,</span> <span class="token class-name">Post</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>errors<span class="token punctuation">::</span></span><span class="token class-name">AppError</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token punctuation">::</span><span class="token class-name">Result</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用者只需：</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token namespace">my_app<span class="token punctuation">::</span>prelude<span class="token punctuation">::</span></span><span class="token operator">*</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 4. 合理组织大型项目</span></span>
<span class="line">src<span class="token operator">/</span></span>
<span class="line">├── lib<span class="token punctuation">.</span>rs           ← 库入口，重新导出 <span class="token constant">API</span></span>
<span class="line">├── api<span class="token operator">/</span>             ← 按功能分组</span>
<span class="line">├── models<span class="token operator">/</span>          ← 按数据模型分组</span>
<span class="line">├── services<span class="token operator">/</span>        ← 按服务分组</span>
<span class="line">└── utils<span class="token operator">/</span>           ← 工具函数</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="❌-避免做法" tabindex="-1"><a class="header-anchor" href="#❌-避免做法"><span>❌ 避免做法</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// 1. 不要过度嵌套</span></span>
<span class="line">src<span class="token operator">/</span></span>
<span class="line">└── api<span class="token operator">/</span></span>
<span class="line">    └── v1<span class="token operator">/</span></span>
<span class="line">        └── public<span class="token operator">/</span></span>
<span class="line">            └── users<span class="token operator">/</span></span>
<span class="line">                └── handlers<span class="token operator">/</span>  ← 太深了！</span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2. 不要在 mod.rs 中写太多逻辑</span></span>
<span class="line"><span class="token comment">// src/api/mod.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">users</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// ❌ 不要在这里定义大量结构体和函数</span></span>
<span class="line"><span class="token comment">// 应该在单独的文件中</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3. 不要混用两种风格</span></span>
<span class="line">src<span class="token operator">/</span></span>
<span class="line">├── old_module<span class="token operator">/</span></span>
<span class="line">│   └── <span class="token keyword">mod</span><span class="token punctuation">.</span>rs       ← 旧风格</span>
<span class="line">├── new_module<span class="token punctuation">.</span>rs    ← 新风格</span>
<span class="line">└── new_module<span class="token operator">/</span>      ← 混乱！</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="十、总结对比" tabindex="-1"><a class="header-anchor" href="#十、总结对比"><span>十、总结对比</span></a></h2><h3 id="rust-模块系统的优势" tabindex="-1"><a class="header-anchor" href="#rust-模块系统的优势"><span>Rust 模块系统的优势</span></a></h3><p>✅ <strong>编译时检查</strong>：模块路径错误在编译时发现<br> ✅ <strong>明确的可见性</strong>：<code>pub</code>、<code>pub(crate)</code> 等精确控制<br> ✅ <strong>零成本抽象</strong>：模块在编译后不存在<br> ✅ <strong>强制性</strong>：必须显式声明 <code>mod</code></p><h3 id="python-模块系统的优势" tabindex="-1"><a class="header-anchor" href="#python-模块系统的优势"><span>Python 模块系统的优势</span></a></h3><p>✅ <strong>动态灵活</strong>：可以在运行时修改模块<br> ✅ <strong>简单易懂</strong>：文件即模块<br> ✅ <strong>自动发现</strong>：不需要显式声明<br> ✅ <strong>可选入口</strong>：<code>__init__.py</code> 可选（Python 3.3+）</p><h3 id="相似之处" tabindex="-1"><a class="header-anchor" href="#相似之处"><span>相似之处</span></a></h3><table><thead><tr><th>功能</th><th>Rust</th><th>Python</th></tr></thead><tbody><tr><td>模块入口</td><td><code>mod.rs</code> / <code>模块名.rs</code></td><td><code>__init__.py</code></td></tr><tr><td>重新导出</td><td><code>pub use</code></td><td><code>__all__</code></td></tr><tr><td>子模块</td><td><code>pub mod</code></td><td>子文件/子文件夹</td></tr><tr><td>相对导入</td><td><code>super::</code>, <code>self::</code></td><td><code>..</code>, <code>.</code></td></tr></tbody></table><hr><h2 id="实战练习" tabindex="-1"><a class="header-anchor" href="#实战练习"><span>实战练习</span></a></h2><p>创建一个图书管理系统：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">library_system/</span>
<span class="line">├── Cargo.toml</span>
<span class="line">└── src/</span>
<span class="line">    ├── main.rs</span>
<span class="line">    ├── lib.rs</span>
<span class="line">    ├── models.rs</span>
<span class="line">    ├── models/</span>
<span class="line">    │   ├── book.rs</span>
<span class="line">    │   ├── author.rs</span>
<span class="line">    │   └── category.rs</span>
<span class="line">    ├── services.rs</span>
<span class="line">    ├── services/</span>
<span class="line">    │   ├── library.rs</span>
<span class="line">    │   └── search.rs</span>
<span class="line">    └── utils.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>试着自己实现这个结构，并理解模块之间的关系！</p><hr><p><strong>总结</strong>：Rust 的模块系统比 Python 更严格但也更安全。掌握 <code>mod.rs</code> 和现代模块组织方式，能让你的项目结构更清晰！🦀📚</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated:: </span><time class="meta-item-info" datetime="2025-10-26T15:13:32.000Z" data-allow-mismatch>10/26/25, 3:13 PM</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1030360567@qq.com">uponup</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/x-lang/assets/app-WzcM213c.js" defer></script>
  </body>
</html>
