# Tokio å¼‚æ­¥ç¼–ç¨‹å®Œæ•´æ•™ç¨‹

## æ¬¢è¿æ¥åˆ° Tokio å¼‚æ­¥ç¼–ç¨‹ä¸–ç•Œï¼ğŸš€

è¿™æ˜¯ä¸€å¥—ä»é›¶åˆ°ç²¾é€šçš„ Tokio å¼‚æ­¥ç¼–ç¨‹æ•™ç¨‹ï¼Œæ¶µç›–äº†ä»åŸºç¡€æ¦‚å¿µåˆ°å®æˆ˜é¡¹ç›®çš„å®Œæ•´å†…å®¹ã€‚

## ğŸ“š å­¦ä¹ è·¯å¾„

### ğŸŒ± ç¬¬ä¸€æ­¥ï¼šç†è§£ Tokio

**[01_tokio_intro.md](./01_tokio_intro.md)** - Tokio å…¥é—¨

- ä»€ä¹ˆæ˜¯ Tokioï¼Ÿ
- ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ç¼–ç¨‹ï¼Ÿ
- Tokio çš„æ ¸å¿ƒç»„ä»¶
- å®‰è£…å’Œé…ç½®
- ä½•æ—¶ä½¿ç”¨ Tokio

**å…³é”®è¦ç‚¹**ï¼š
- å¼‚æ­¥ vs åŒæ­¥çš„åŒºåˆ«
- Tokio çš„ä¼˜åŠ¿
- é€‚ç”¨åœºæ™¯åˆ¤æ–­

---

### ğŸ“– ç¬¬äºŒæ­¥ï¼šæŒæ¡ async/await

**[02_async_basics.md](./02_async_basics.md)** - å¼‚æ­¥ç¼–ç¨‹åŸºç¡€

- async å’Œ await å…³é”®å­—
- Future æ˜¯ä»€ä¹ˆ
- å¹¶å‘æ‰§è¡Œ
- é”™è¯¯å¤„ç†
- ç”Ÿå‘½å‘¨æœŸ

**å…³é”®è¦ç‚¹**ï¼š
- `async fn` åˆ›å»º Future
- `.await` ç­‰å¾… Future
- å¹¶å‘ vs é¡ºåºæ‰§è¡Œ
- ä½¿ç”¨ `join!` å’Œ `select!`

**å®è·µç»ƒä¹ **ï¼š
```rust
#[tokio::main]
async fn main() {
    let task1 = tokio::spawn(async { "ä»»åŠ¡1" });
    let task2 = tokio::spawn(async { "ä»»åŠ¡2" });
    
    let (r1, r2) = tokio::join!(task1, task2);
    println!("{:?}, {:?}", r1, r2);
}
```

---

### âš™ï¸ ç¬¬ä¸‰æ­¥ï¼šæ·±å…¥ Runtime

**[03_tokio_runtime.md](./03_tokio_runtime.md)** - Tokio Runtime è¯¦è§£

- Runtime ç±»å‹ï¼ˆå•çº¿ç¨‹ vs å¤šçº¿ç¨‹ï¼‰
- åˆ›å»ºå’Œé…ç½® Runtime
- ä»»åŠ¡è°ƒåº¦
- æ€§èƒ½è°ƒä¼˜
- ç”Ÿå‘½å‘¨æœŸç®¡ç†

**å…³é”®è¦ç‚¹**ï¼š
- é€‰æ‹©åˆé€‚çš„ Runtime
- ä½¿ç”¨ `spawn_blocking` å¤„ç†é˜»å¡æ“ä½œ
- é…ç½®å·¥ä½œçº¿ç¨‹æ•°
- ä¼˜é›…å…³é—­

**é…ç½®ç¤ºä¾‹**ï¼š
```rust
use tokio::runtime::Builder;

let rt = Builder::new_multi_thread()
    .worker_threads(4)
    .enable_all()
    .build()
    .unwrap();
```

---

### ğŸ”„ ç¬¬å››æ­¥ï¼šäº†è§£ç”Ÿæ€

**[04_tokio_vs_others.md](./04_tokio_vs_others.md)** - Tokio vs å…¶ä»–è¿è¡Œæ—¶

- Tokio vs async-std vs smol
- æ€§èƒ½å¯¹æ¯”
- ç”Ÿæ€ç³»ç»Ÿå¯¹æ¯”
- é€‰æ‹©æŒ‡å—
- è¿ç§»æŒ‡å—

**å…³é”®è¦ç‚¹**ï¼š
- Tokio æ˜¯ç”Ÿäº§ç¯å¢ƒé¦–é€‰
- async-std é€‚åˆå­¦ä¹ 
- smol é€‚åˆå¿«é€Ÿç¼–è¯‘
- æ ¹æ®éœ€æ±‚é€‰æ‹©

**å¯¹æ¯”è¡¨**ï¼š

| ç‰¹æ€§ | Tokio | async-std | smol |
|------|-------|-----------|------|
| ç”Ÿæ€ | â­â­â­â­â­ | â­â­â­ | â­â­ |
| æ€§èƒ½ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­â­ |
| æ˜“ç”¨ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­ |

---

### ğŸ› ï¸ ç¬¬äº”æ­¥ï¼šå®æˆ˜é¡¹ç›®

**[05_projects.md](./05_projects.md)** - å®æˆ˜é¡¹ç›®

**6 ä¸ªå®Œæ•´é¡¹ç›®**ï¼š
1. å¼‚æ­¥ HTTP æœåŠ¡å™¨ï¼ˆAxumï¼‰
2. å¹¶å‘æ–‡ä»¶å¤„ç†å™¨
3. WebSocket èŠå¤©æœåŠ¡å™¨
4. æ•°æ®åº“è¿æ¥æ± 
5. å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
6. API è¯·æ±‚èšåˆå™¨

**æ¯ä¸ªé¡¹ç›®åŒ…å«**ï¼š
- âœ… å®Œæ•´å¯è¿è¡Œçš„ä»£ç 
- âœ… ä¾èµ–é…ç½®
- âœ… æµ‹è¯•æ–¹æ³•
- âœ… æœ€ä½³å®è·µ

---

## ğŸ¯ å­¦ä¹ ç›®æ ‡

å®Œæˆè¿™å¥—æ•™ç¨‹åï¼Œä½ å°†èƒ½å¤Ÿï¼š

- âœ… ç†è§£å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µ
- âœ… ç†Ÿç»ƒä½¿ç”¨ async/await è¯­æ³•
- âœ… é…ç½®å’Œä¼˜åŒ– Tokio Runtime
- âœ… æ„å»ºé«˜æ€§èƒ½çš„å¼‚æ­¥åº”ç”¨
- âœ… é€‰æ‹©åˆé€‚çš„å¼‚æ­¥è¿è¡Œæ—¶
- âœ… åº”ç”¨æœ€ä½³å®è·µ
- âœ… ç‹¬ç«‹å®Œæˆå®æˆ˜é¡¹ç›®

---

## ğŸ“… å»ºè®®å­¦ä¹ è®¡åˆ’

### ç¬¬ 1 å¤©ï¼šåŸºç¡€å…¥é—¨ï¼ˆ2-3 å°æ—¶ï¼‰
- é˜…è¯» Tokio å…¥é—¨
- ç†è§£å¼‚æ­¥ç¼–ç¨‹åŸºç¡€
- å®Œæˆç®€å•çš„ async/await ç»ƒä¹ 

### ç¬¬ 2 å¤©ï¼šæ·±å…¥ç†è§£ï¼ˆ3-4 å°æ—¶ï¼‰
- å­¦ä¹  Runtime æ¦‚å¿µ
- å®è·µå¹¶å‘ä»»åŠ¡ç®¡ç†
- äº†è§£å…¶ä»–è¿è¡Œæ—¶å¯¹æ¯”

### ç¬¬ 3 å¤©ï¼šå®æˆ˜ç»ƒä¹ ï¼ˆ4-5 å°æ—¶ï¼‰
- å®Œæˆé¡¹ç›® 1-3
- ç†è§£ Web æœåŠ¡å™¨æ„å»º
- æŒæ¡å®æ—¶é€šä¿¡

### ç¬¬ 4 å¤©ï¼šè¿›é˜¶åº”ç”¨ï¼ˆ4-5 å°æ—¶ï¼‰
- å®Œæˆé¡¹ç›® 4-6
- å­¦ä¹ æ•°æ®åº“é›†æˆ
- æŒæ¡ä»»åŠ¡è°ƒåº¦

---

## ğŸ”§ ç¯å¢ƒå‡†å¤‡

### 1. å®‰è£… Rust

```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

### 2. åˆ›å»ºé¡¹ç›®

```bash
cargo new tokio-demo
cd tokio-demo
```

### 3. æ·»åŠ ä¾èµ–

```toml
[dependencies]
tokio = { version = "1", features = ["full"] }
```

### 4. ç¬¬ä¸€ä¸ªç¨‹åº

```rust
#[tokio::main]
async fn main() {
    println!("Hello, Tokio!");
}
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ€ç®€ç¤ºä¾‹

```rust
use tokio::time::{sleep, Duration};

#[tokio::main]
async fn main() {
    println!("å¼€å§‹");
    sleep(Duration::from_secs(1)).await;
    println!("1 ç§’å");
}
```

### å¹¶å‘ç¤ºä¾‹

```rust
#[tokio::main]
async fn main() {
    let task1 = tokio::spawn(async {
        println!("ä»»åŠ¡ 1");
    });
    
    let task2 = tokio::spawn(async {
        println!("ä»»åŠ¡ 2");
    });
    
    task1.await.unwrap();
    task2.await.unwrap();
}
```

### HTTP æœåŠ¡å™¨ç¤ºä¾‹

```rust
use axum::{routing::get, Router};

#[tokio::main]
async fn main() {
    let app = Router::new()
        .route("/", get(|| async { "Hello!" }));
    
    let listener = tokio::net::TcpListener::bind("127.0.0.1:3000")
        .await
        .unwrap();
    
    axum::serve(listener, app).await.unwrap();
}
```

---

## ğŸ“– è¡¥å……èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Tokio å®˜æ–¹ç½‘ç«™](https://tokio.rs/)
- [Tokio æ•™ç¨‹](https://tokio.rs/tokio/tutorial)
- [API æ–‡æ¡£](https://docs.rs/tokio/)

### ç¤¾åŒºèµ„æº
- [Tokio Discord](https://discord.gg/tokio)
- [Rust å¼‚æ­¥ç¼–ç¨‹ä¹¦](https://rust-lang.github.io/async-book/)
- [Tokio GitHub](https://github.com/tokio-rs/tokio)

### ç›¸å…³åº“
- [Axum](https://github.com/tokio-rs/axum) - Web æ¡†æ¶
- [Tonic](https://github.com/hyperium/tonic) - gRPC
- [reqwest](https://github.com/seanmonstar/reqwest) - HTTP å®¢æˆ·ç«¯
- [sqlx](https://github.com/launchbadge/sqlx) - å¼‚æ­¥ SQL

---

## ğŸ’¡ å­¦ä¹ æŠ€å·§

1. **åŠ¨æ‰‹å®è·µ**ï¼šä¸è¦åªçœ‹ä»£ç ï¼Œä¸€å®šè¦è¿è¡Œ
2. **å¾ªåºæ¸è¿›**ï¼šæŒ‰é¡ºåºå­¦ä¹ ï¼Œä¸è¦è·³è·ƒ
3. **å¯¹æ¯”ç†è§£**ï¼šåŒæ­¥ vs å¼‚æ­¥çš„åŒºåˆ«
4. **è°ƒè¯•æŠ€å·§**ï¼šä½¿ç”¨ `println!` å’Œ `dbg!` è°ƒè¯•
5. **é˜…è¯»æ–‡æ¡£**ï¼šé‡åˆ°é—®é¢˜æŸ¥å®˜æ–¹æ–‡æ¡£
6. **å®æˆ˜é¡¹ç›®**ï¼šå®Œæˆæ‰€æœ‰ç¤ºä¾‹é¡¹ç›®

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä»€ä¹ˆæ—¶å€™ç”¨å¼‚æ­¥ï¼Ÿ
**A**: I/O å¯†é›†å‹ä»»åŠ¡ï¼ˆç½‘ç»œã€æ–‡ä»¶ã€æ•°æ®åº“ï¼‰

### Q2: å¼‚æ­¥ä¸€å®šæ¯”åŒæ­¥å¿«å—ï¼Ÿ
**A**: ä¸ä¸€å®šã€‚CPU å¯†é›†å‹ä»»åŠ¡ç”¨åŒæ­¥æ›´å¥½ã€‚

### Q3: å¦‚ä½•å¤„ç†é˜»å¡æ“ä½œï¼Ÿ
**A**: ä½¿ç”¨ `tokio::task::spawn_blocking`

### Q4: å¦‚ä½•è°ƒè¯•å¼‚æ­¥ä»£ç ï¼Ÿ
**A**: ä½¿ç”¨ `tokio-console` æˆ– `tracing`

### Q5: Tokio vs async-std é€‰å“ªä¸ªï¼Ÿ
**A**: ç”Ÿäº§ç¯å¢ƒä¼˜å…ˆé€‰ Tokio

---

## ğŸ“ è¯„ä¼°æµ‹è¯•

å®Œæˆå­¦ä¹ åï¼Œå°è¯•ç‹¬ç«‹å®Œæˆï¼š

### åˆçº§ï¼ˆæŒæ¡åŸºç¡€ï¼‰
- [ ] åˆ›å»ºä¸€ä¸ªç®€å•çš„å¼‚æ­¥ç¨‹åº
- [ ] ä½¿ç”¨ `async/await` ç¼–å†™å‡½æ•°
- [ ] å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡

### ä¸­çº§ï¼ˆç†è§£åŸç†ï¼‰
- [ ] é…ç½®è‡ªå®šä¹‰ Runtime
- [ ] å®ç°è¶…æ—¶å’Œé‡è¯•æœºåˆ¶
- [ ] æ„å»ºç®€å•çš„ HTTP æœåŠ¡å™¨

### é«˜çº§ï¼ˆå®æˆ˜åº”ç”¨ï¼‰
- [ ] æ„å»ºå®Œæ•´çš„ Web API
- [ ] å®ç° WebSocket é€šä¿¡
- [ ] é›†æˆæ•°æ®åº“å¹¶å¤„ç†å¹¶å‘

---

## ğŸŒŸ ä¸‹ä¸€æ­¥

å®Œæˆ Tokio å­¦ä¹ åï¼Œå¯ä»¥æ¢ç´¢ï¼š

- **Web æ¡†æ¶**ï¼šAxumã€Actix-web
- **æ•°æ®åº“**ï¼šsqlxã€tokio-postgres
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šlapin (RabbitMQ)
- **gRPC**ï¼štonic
- **ç›‘æ§**ï¼štracingã€tokio-console

---

## ğŸ“ åé¦ˆå’Œè´¡çŒ®

å¦‚æœä½ å‘ç°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿ï¼š
- æå‡º Issue
- æäº¤ Pull Request
- åˆ†äº«å­¦ä¹ å¿ƒå¾—

---

**ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼Happy Coding! ğŸ¦€âš¡**

