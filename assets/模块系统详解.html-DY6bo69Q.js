import{_ as n,c as a,b as e,o as p}from"./app-WzcM213c.js";const l={};function i(t,s){return p(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="rust-模块系统-单文件-vs-文件夹模块" tabindex="-1"><a class="header-anchor" href="#rust-模块系统-单文件-vs-文件夹模块"><span>Rust 模块系统：单文件 vs 文件夹模块</span></a></h1><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>Rust 的模块系统有两种组织方式：</p><ol><li><strong>单文件模块</strong>：一个 <code>.rs</code> 文件就是一个模块</li><li><strong>文件夹模块</strong>：一个文件夹代表一个模块，使用 <code>mod.rs</code> 或同名文件</li></ol><h2 id="一、单文件模块" tabindex="-1"><a class="header-anchor" href="#一、单文件模块"><span>一、单文件模块</span></a></h2><h3 id="基本结构" tabindex="-1"><a class="header-anchor" href="#基本结构"><span>基本结构</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_project/</span>
<span class="line">├── Cargo.toml</span>
<span class="line">└── src/</span>
<span class="line">    ├── main.rs</span>
<span class="line">    ├── utils.rs          ← 单文件模块</span>
<span class="line">    └── database.rs       ← 单文件模块</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用方式" tabindex="-1"><a class="header-anchor" href="#使用方式"><span>使用方式</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/main.rs</span></span>
<span class="line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">utils</span><span class="token punctuation">;</span>      <span class="token comment">// 声明模块（告诉编译器去找 utils.rs）</span></span>
<span class="line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">database</span><span class="token punctuation">;</span>   <span class="token comment">// 声明模块</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token namespace">utils<span class="token punctuation">::</span></span><span class="token function">helper_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token namespace">database<span class="token punctuation">::</span></span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/utils.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">helper_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;这是工具函数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">another_helper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;另一个工具函数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/database.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;连接数据库&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;执行查询: {}&quot;</span><span class="token punctuation">,</span> sql<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>特点</strong>：</p><ul><li>✅ 简单直接</li><li>✅ 适合小模块</li><li>✅ 一个文件对应一个模块</li><li>❌ 不适合复杂的子模块结构</li></ul><hr><h2 id="二、文件夹模块-使用-mod-rs" tabindex="-1"><a class="header-anchor" href="#二、文件夹模块-使用-mod-rs"><span>二、文件夹模块（使用 mod.rs）</span></a></h2><h3 id="基本结构-1" tabindex="-1"><a class="header-anchor" href="#基本结构-1"><span>基本结构</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_project/</span>
<span class="line">├── Cargo.toml</span>
<span class="line">└── src/</span>
<span class="line">    ├── main.rs</span>
<span class="line">    └── network/          ← 文件夹模块</span>
<span class="line">        ├── mod.rs        ← 模块入口（类似 Python 的 __init__.py）</span>
<span class="line">        ├── tcp.rs</span>
<span class="line">        ├── udp.rs</span>
<span class="line">        └── http.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="文件内容" tabindex="-1"><a class="header-anchor" href="#文件内容"><span>文件内容</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/main.rs</span></span>
<span class="line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">network</span><span class="token punctuation">;</span>  <span class="token comment">// 声明模块（编译器会找 network/mod.rs）</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token namespace">network<span class="token punctuation">::</span>tcp<span class="token punctuation">::</span></span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token namespace">network<span class="token punctuation">::</span>http<span class="token punctuation">::</span></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/network/mod.rs - 模块入口</span></span>
<span class="line"><span class="token comment">// 声明子模块</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">tcp</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">udp</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">http</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 可以在这里定义公共功能</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;网络模块初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 可以重新导出（re-export）</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">tcp<span class="token punctuation">::</span></span><span class="token class-name">TcpConnection</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">http<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Request</span><span class="token punctuation">,</span> <span class="token class-name">Response</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/network/tcp.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">TcpConnection</span> <span class="token punctuation">{</span></span>
<span class="line">    address<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">impl</span> <span class="token class-name">TcpConnection</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span>addr<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">TcpConnection</span> <span class="token punctuation">{</span></span>
<span class="line">            address<span class="token punctuation">:</span> addr<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;TCP 连接&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/network/http.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">Request</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> url<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">Response</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> status<span class="token punctuation">:</span> <span class="token keyword">u16</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;HTTP GET 请求&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>特点</strong>：</p><ul><li>✅ 适合复杂模块</li><li>✅ 清晰的层次结构</li><li>✅ 可以有多层嵌套</li><li>✅ <code>mod.rs</code> 作为模块入口</li></ul><hr><h2 id="三、现代方式-rust-2018-同名文件" tabindex="-1"><a class="header-anchor" href="#三、现代方式-rust-2018-同名文件"><span>三、现代方式（Rust 2018+）：同名文件</span></a></h2><p>Rust 2018 引入了新的方式，不再必须使用 <code>mod.rs</code>。</p><h3 id="基本结构-2" tabindex="-1"><a class="header-anchor" href="#基本结构-2"><span>基本结构</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_project/</span>
<span class="line">├── Cargo.toml</span>
<span class="line">└── src/</span>
<span class="line">    ├── main.rs</span>
<span class="line">    ├── network.rs        ← 模块文件（代替 network/mod.rs）</span>
<span class="line">    └── network/          ← 子模块文件夹</span>
<span class="line">        ├── tcp.rs</span>
<span class="line">        ├── udp.rs</span>
<span class="line">        └── http.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="文件内容-1" tabindex="-1"><a class="header-anchor" href="#文件内容-1"><span>文件内容</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/main.rs</span></span>
<span class="line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">network</span><span class="token punctuation">;</span>  <span class="token comment">// 编译器会找 network.rs</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token namespace">network<span class="token punctuation">::</span>tcp<span class="token punctuation">::</span></span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/network.rs - 模块定义（代替 mod.rs）</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">tcp</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">udp</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">http</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;网络模块初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/network/tcp.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;TCP 连接&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>对比</strong>：</p><table><thead><tr><th>方式</th><th>Rust 2015</th><th>Rust 2018+</th></tr></thead><tbody><tr><td>模块入口</td><td><code>network/mod.rs</code></td><td><code>network.rs</code></td></tr><tr><td>子模块</td><td><code>network/*.rs</code></td><td><code>network/*.rs</code></td></tr><tr><td>推荐度</td><td>旧方式</td><td>✅ 推荐</td></tr></tbody></table><hr><h2 id="四、完整示例对比" tabindex="-1"><a class="header-anchor" href="#四、完整示例对比"><span>四、完整示例对比</span></a></h2><h3 id="方式-1-使用-mod-rs-传统" tabindex="-1"><a class="header-anchor" href="#方式-1-使用-mod-rs-传统"><span>方式 1：使用 mod.rs（传统）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">src/</span>
<span class="line">├── main.rs</span>
<span class="line">└── api/</span>
<span class="line">    ├── mod.rs        ← 模块入口</span>
<span class="line">    ├── users.rs</span>
<span class="line">    ├── posts.rs</span>
<span class="line">    └── auth/</span>
<span class="line">        ├── mod.rs    ← 子模块入口</span>
<span class="line">        ├── login.rs</span>
<span class="line">        └── logout.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api/mod.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">users</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">posts</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">auth</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init_api</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;API 初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api/auth/mod.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">login</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">logout</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init_auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;认证模块初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="方式-2-使用同名文件-现代" tabindex="-1"><a class="header-anchor" href="#方式-2-使用同名文件-现代"><span>方式 2：使用同名文件（现代）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">src/</span>
<span class="line">├── main.rs</span>
<span class="line">├── api.rs            ← 代替 api/mod.rs</span>
<span class="line">├── api/</span>
<span class="line">│   ├── users.rs</span>
<span class="line">│   ├── posts.rs</span>
<span class="line">│   ├── auth.rs       ← 代替 api/auth/mod.rs</span>
<span class="line">│   └── auth/</span>
<span class="line">│       ├── login.rs</span>
<span class="line">│       └── logout.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api.rs（代替 api/mod.rs）</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">users</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">posts</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">auth</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init_api</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;API 初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api/auth.rs（代替 api/auth/mod.rs）</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">login</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">logout</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init_auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;认证模块初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>推荐使用方式 2</strong>，因为：</p><ul><li>✅ 更清晰：文件名就是模块名</li><li>✅ 避免多个 <code>mod.rs</code> 混淆</li><li>✅ 编辑器中更容易识别</li></ul><hr><h2 id="五、rust-vs-python-对比" tabindex="-1"><a class="header-anchor" href="#五、rust-vs-python-对比"><span>五、Rust vs Python 对比</span></a></h2><h3 id="python-的模块系统" tabindex="-1"><a class="header-anchor" href="#python-的模块系统"><span>Python 的模块系统</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_project/</span>
<span class="line">├── main.py</span>
<span class="line">└── network/</span>
<span class="line">    ├── __init__.py    ← 包初始化文件</span>
<span class="line">    ├── tcp.py</span>
<span class="line">    ├── http.py</span>
<span class="line">    └── auth/</span>
<span class="line">        ├── __init__.py</span>
<span class="line">        ├── login.py</span>
<span class="line">        └── logout.py</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># main.py</span></span>
<span class="line"><span class="token keyword">from</span> network <span class="token keyword">import</span> tcp</span>
<span class="line"><span class="token keyword">from</span> network<span class="token punctuation">.</span>auth <span class="token keyword">import</span> login</span>
<span class="line"></span>
<span class="line">tcp<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">login<span class="token punctuation">.</span>authenticate<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># network/__init__.py</span></span>
<span class="line"><span class="token comment"># 初始化代码</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;网络模块加载&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 可以重新导出</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>tcp <span class="token keyword">import</span> connect</span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>http <span class="token keyword">import</span> get</span>
<span class="line"></span>
<span class="line">__all__ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;connect&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># network/tcp.py</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;TCP 连接&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="rust-的模块系统-对应设计" tabindex="-1"><a class="header-anchor" href="#rust-的模块系统-对应设计"><span>Rust 的模块系统（对应设计）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_project/</span>
<span class="line">├── main.rs</span>
<span class="line">└── network/</span>
<span class="line">    ├── mod.rs         ← 对应 __init__.py</span>
<span class="line">    ├── tcp.rs</span>
<span class="line">    ├── http.rs</span>
<span class="line">    └── auth/</span>
<span class="line">        ├── mod.rs     ← 对应 __init__.py</span>
<span class="line">        ├── login.rs</span>
<span class="line">        └── logout.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// main.rs</span></span>
<span class="line"><span class="token keyword">mod</span> <span class="token module-declaration namespace">network</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">use</span> <span class="token namespace">network<span class="token punctuation">::</span></span>tcp<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token namespace">network<span class="token punctuation">::</span>auth<span class="token punctuation">::</span></span>login<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token namespace">tcp<span class="token punctuation">::</span></span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token namespace">login<span class="token punctuation">::</span></span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// network/mod.rs - 对应 __init__.py</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">tcp</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">http</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">auth</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 初始化代码</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;网络模块加载&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 重新导出（对应 __all__）</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">tcp<span class="token punctuation">::</span></span>connect<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">http<span class="token punctuation">::</span></span>get<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// network/tcp.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;TCP 连接&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="详细对比表" tabindex="-1"><a class="header-anchor" href="#详细对比表"><span>详细对比表</span></a></h3><table><thead><tr><th>特性</th><th>Python</th><th>Rust (mod.rs)</th><th>Rust (现代)</th></tr></thead><tbody><tr><td><strong>包/模块入口</strong></td><td><code>__init__.py</code></td><td><code>mod.rs</code></td><td><code>模块名.rs</code></td></tr><tr><td><strong>必需性</strong></td><td>可选（Python 3.3+）</td><td>必需</td><td>必需</td></tr><tr><td><strong>导入语法</strong></td><td><code>import</code> / <code>from...import</code></td><td><code>mod</code> + <code>use</code></td><td><code>mod</code> + <code>use</code></td></tr><tr><td><strong>重新导出</strong></td><td><code>__all__</code></td><td><code>pub use</code></td><td><code>pub use</code></td></tr><tr><td><strong>可见性</strong></td><td>默认公开</td><td>默认私有</td><td>默认私有</td></tr><tr><td><strong>编译时检查</strong></td><td>❌</td><td>✅</td><td>✅</td></tr><tr><td><strong>相对导入</strong></td><td><code>from .module</code></td><td><code>use super::</code></td><td><code>use super::</code></td></tr></tbody></table><hr><h2 id="六、复杂项目实例" tabindex="-1"><a class="header-anchor" href="#六、复杂项目实例"><span>六、复杂项目实例</span></a></h2><h3 id="rust-项目结构" tabindex="-1"><a class="header-anchor" href="#rust-项目结构"><span>Rust 项目结构</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">my_web_app/</span>
<span class="line">├── Cargo.toml</span>
<span class="line">└── src/</span>
<span class="line">    ├── main.rs</span>
<span class="line">    ├── lib.rs               ← 库入口</span>
<span class="line">    ├── config.rs            ← 单文件模块</span>
<span class="line">    ├── models.rs            ← 模块文件</span>
<span class="line">    ├── models/              ← 子模块文件夹</span>
<span class="line">    │   ├── user.rs</span>
<span class="line">    │   ├── post.rs</span>
<span class="line">    │   └── comment.rs</span>
<span class="line">    ├── api.rs</span>
<span class="line">    ├── api/</span>
<span class="line">    │   ├── users.rs</span>
<span class="line">    │   ├── posts.rs</span>
<span class="line">    │   └── auth.rs</span>
<span class="line">    └── database.rs</span>
<span class="line">    └── database/</span>
<span class="line">        ├── connection.rs</span>
<span class="line">        └── migrations.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="各文件内容" tabindex="-1"><a class="header-anchor" href="#各文件内容"><span>各文件内容</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/lib.rs - 库的根模块</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">config</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">models</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">api</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">database</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 重新导出常用项</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">models<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">User</span><span class="token punctuation">,</span> <span class="token class-name">Post</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">api<span class="token punctuation">::</span>users<span class="token punctuation">::</span></span>create_user<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">database<span class="token punctuation">::</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/main.rs - 可执行文件</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token namespace">my_web_app<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">User</span><span class="token punctuation">,</span> create_user<span class="token punctuation">,</span> <span class="token class-name">Connection</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">let</span> conn <span class="token operator">=</span> <span class="token class-name">Connection</span><span class="token punctuation">::</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/models.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">user</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">post</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">comment</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 重新导出</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">user<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">post<span class="token punctuation">::</span></span><span class="token class-name">Post</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">comment<span class="token punctuation">::</span></span><span class="token class-name">Comment</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/models/user.rs</span></span>
<span class="line"><span class="token attribute attr-name">#[derive(Debug, Clone)]</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> id<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">pub</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">impl</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">            id<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">            name<span class="token punctuation">:</span> name<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">users</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">posts</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">auth</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">&quot;API 初始化&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api/users.rs</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">create_user</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">User</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">get_user</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">User</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ...</span></span>
<span class="line">    <span class="token class-name">None</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="七、路径和导入" tabindex="-1"><a class="header-anchor" href="#七、路径和导入"><span>七、路径和导入</span></a></h2><h3 id="绝对路径-vs-相对路径" tabindex="-1"><a class="header-anchor" href="#绝对路径-vs-相对路径"><span>绝对路径 vs 相对路径</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/api/users.rs</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ❌ 不推荐：绝对路径（从 crate 根开始）</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models<span class="token punctuation">::</span>user<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>database<span class="token punctuation">::</span>connection<span class="token punctuation">::</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ✅ 推荐：使用 crate:: 从根开始</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>database<span class="token punctuation">::</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ✅ 相对路径：从当前模块开始</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">super</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>auth<span class="token punctuation">::</span></span>authenticate<span class="token punctuation">;</span>  <span class="token comment">// 上一级的 auth 模块</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">super</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>super<span class="token punctuation">::</span>models<span class="token punctuation">::</span></span><span class="token class-name">Post</span><span class="token punctuation">;</span> <span class="token comment">// 上两级的 models</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 当前模块内</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">self</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>helpers<span class="token punctuation">::</span></span>format_response<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="python-对比" tabindex="-1"><a class="header-anchor" href="#python-对比"><span>Python 对比</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># network/auth/login.py</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 绝对导入</span></span>
<span class="line"><span class="token keyword">from</span> network<span class="token punctuation">.</span>tcp <span class="token keyword">import</span> connect</span>
<span class="line"><span class="token keyword">from</span> network<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>helpers <span class="token keyword">import</span> validate</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 相对导入</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span>tcp <span class="token keyword">import</span> connect        <span class="token comment"># 上一级</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span>helpers <span class="token keyword">import</span> validate    <span class="token comment"># 当前级</span></span>
<span class="line"><span class="token keyword">from</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>utils <span class="token keyword">import</span> log         <span class="token comment"># 上两级</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="rust-路径关键字" tabindex="-1"><a class="header-anchor" href="#rust-路径关键字"><span>Rust 路径关键字</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// crate:: - 从当前 crate 的根开始</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// super:: - 父模块</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">super</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>auth<span class="token punctuation">::</span></span><span class="token class-name">Token</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// self:: - 当前模块</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token keyword">self</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>helpers<span class="token punctuation">::</span></span>format<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="八、可见性控制" tabindex="-1"><a class="header-anchor" href="#八、可见性控制"><span>八、可见性控制</span></a></h2><h3 id="rust-的精细控制" tabindex="-1"><a class="header-anchor" href="#rust-的精细控制"><span>Rust 的精细控制</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// src/models/user.rs</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 公开给所有人</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">pub</span> id<span class="token punctuation">:</span> <span class="token keyword">u64</span><span class="token punctuation">,</span>              <span class="token comment">// 公开字段</span></span>
<span class="line">    <span class="token keyword">pub</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>         <span class="token comment">// 公开字段</span></span>
<span class="line">    email<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>            <span class="token comment">// 私有字段（默认）</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 仅在当前 crate 内公开</span></span>
<span class="line"><span class="token keyword">pub</span><span class="token punctuation">(</span><span class="token keyword">crate</span><span class="token punctuation">)</span> <span class="token keyword">fn</span> <span class="token function-definition function">internal_helper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 只能在当前 crate 内使用</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 仅在父模块中公开</span></span>
<span class="line"><span class="token keyword">pub</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">)</span> <span class="token keyword">fn</span> <span class="token function-definition function">parent_only</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 只能在父模块使用</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 仅在指定路径中公开</span></span>
<span class="line"><span class="token keyword">pub</span><span class="token punctuation">(</span><span class="token keyword">in</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models</span><span class="token punctuation">)</span> <span class="token keyword">fn</span> <span class="token function-definition function">models_only</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 只能在 models 模块内使用</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 完全私有</span></span>
<span class="line"><span class="token keyword">fn</span> <span class="token function-definition function">private_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 只能在当前文件内使用</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="python-的约定" tabindex="-1"><a class="header-anchor" href="#python-的约定"><span>Python 的约定</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># network/tcp.py</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># &quot;公开&quot; - 无前缀</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># &quot;内部&quot; - 单下划线（约定，不强制）</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">_internal_helper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># &quot;私有&quot; - 双下划线（名称改写）</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">__private</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># __all__ 控制 from module import * 的内容</span></span>
<span class="line">__all__ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;connect&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>关键区别</strong>：</p><ul><li>Rust：编译时强制检查</li><li>Python：运行时约定（不强制）</li></ul><hr><h2 id="九、最佳实践" tabindex="-1"><a class="header-anchor" href="#九、最佳实践"><span>九、最佳实践</span></a></h2><h3 id="✅-推荐做法" tabindex="-1"><a class="header-anchor" href="#✅-推荐做法"><span>✅ 推荐做法</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// 1. 使用现代模块系统（同名文件而非 mod.rs）</span></span>
<span class="line">src<span class="token operator">/</span></span>
<span class="line">├── api<span class="token punctuation">.</span>rs          ← 而不是 api<span class="token operator">/</span><span class="token keyword">mod</span><span class="token punctuation">.</span>rs</span>
<span class="line">└── api<span class="token operator">/</span></span>
<span class="line">    └── users<span class="token punctuation">.</span>rs</span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2. 在模块文件中重新导出常用项</span></span>
<span class="line"><span class="token comment">// src/models.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">user</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">post</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">user<span class="token punctuation">::</span></span><span class="token class-name">User</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token namespace">post<span class="token punctuation">::</span></span><span class="token class-name">Post</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3. 使用 prelude 模式简化导入</span></span>
<span class="line"><span class="token comment">// src/prelude.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>models<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">User</span><span class="token punctuation">,</span> <span class="token class-name">Post</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token module-declaration namespace"><span class="token punctuation">::</span>errors<span class="token punctuation">::</span></span><span class="token class-name">AppError</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token punctuation">::</span><span class="token class-name">Result</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用者只需：</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token namespace">my_app<span class="token punctuation">::</span>prelude<span class="token punctuation">::</span></span><span class="token operator">*</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 4. 合理组织大型项目</span></span>
<span class="line">src<span class="token operator">/</span></span>
<span class="line">├── lib<span class="token punctuation">.</span>rs           ← 库入口，重新导出 <span class="token constant">API</span></span>
<span class="line">├── api<span class="token operator">/</span>             ← 按功能分组</span>
<span class="line">├── models<span class="token operator">/</span>          ← 按数据模型分组</span>
<span class="line">├── services<span class="token operator">/</span>        ← 按服务分组</span>
<span class="line">└── utils<span class="token operator">/</span>           ← 工具函数</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="❌-避免做法" tabindex="-1"><a class="header-anchor" href="#❌-避免做法"><span>❌ 避免做法</span></a></h3><div class="language-rust line-numbers-mode" data-highlighter="prismjs" data-ext="rs"><pre><code><span class="line"><span class="token comment">// 1. 不要过度嵌套</span></span>
<span class="line">src<span class="token operator">/</span></span>
<span class="line">└── api<span class="token operator">/</span></span>
<span class="line">    └── v1<span class="token operator">/</span></span>
<span class="line">        └── public<span class="token operator">/</span></span>
<span class="line">            └── users<span class="token operator">/</span></span>
<span class="line">                └── handlers<span class="token operator">/</span>  ← 太深了！</span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2. 不要在 mod.rs 中写太多逻辑</span></span>
<span class="line"><span class="token comment">// src/api/mod.rs</span></span>
<span class="line"><span class="token keyword">pub</span> <span class="token keyword">mod</span> <span class="token module-declaration namespace">users</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// ❌ 不要在这里定义大量结构体和函数</span></span>
<span class="line"><span class="token comment">// 应该在单独的文件中</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3. 不要混用两种风格</span></span>
<span class="line">src<span class="token operator">/</span></span>
<span class="line">├── old_module<span class="token operator">/</span></span>
<span class="line">│   └── <span class="token keyword">mod</span><span class="token punctuation">.</span>rs       ← 旧风格</span>
<span class="line">├── new_module<span class="token punctuation">.</span>rs    ← 新风格</span>
<span class="line">└── new_module<span class="token operator">/</span>      ← 混乱！</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="十、总结对比" tabindex="-1"><a class="header-anchor" href="#十、总结对比"><span>十、总结对比</span></a></h2><h3 id="rust-模块系统的优势" tabindex="-1"><a class="header-anchor" href="#rust-模块系统的优势"><span>Rust 模块系统的优势</span></a></h3><p>✅ <strong>编译时检查</strong>：模块路径错误在编译时发现<br> ✅ <strong>明确的可见性</strong>：<code>pub</code>、<code>pub(crate)</code> 等精确控制<br> ✅ <strong>零成本抽象</strong>：模块在编译后不存在<br> ✅ <strong>强制性</strong>：必须显式声明 <code>mod</code></p><h3 id="python-模块系统的优势" tabindex="-1"><a class="header-anchor" href="#python-模块系统的优势"><span>Python 模块系统的优势</span></a></h3><p>✅ <strong>动态灵活</strong>：可以在运行时修改模块<br> ✅ <strong>简单易懂</strong>：文件即模块<br> ✅ <strong>自动发现</strong>：不需要显式声明<br> ✅ <strong>可选入口</strong>：<code>__init__.py</code> 可选（Python 3.3+）</p><h3 id="相似之处" tabindex="-1"><a class="header-anchor" href="#相似之处"><span>相似之处</span></a></h3><table><thead><tr><th>功能</th><th>Rust</th><th>Python</th></tr></thead><tbody><tr><td>模块入口</td><td><code>mod.rs</code> / <code>模块名.rs</code></td><td><code>__init__.py</code></td></tr><tr><td>重新导出</td><td><code>pub use</code></td><td><code>__all__</code></td></tr><tr><td>子模块</td><td><code>pub mod</code></td><td>子文件/子文件夹</td></tr><tr><td>相对导入</td><td><code>super::</code>, <code>self::</code></td><td><code>..</code>, <code>.</code></td></tr></tbody></table><hr><h2 id="实战练习" tabindex="-1"><a class="header-anchor" href="#实战练习"><span>实战练习</span></a></h2><p>创建一个图书管理系统：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">library_system/</span>
<span class="line">├── Cargo.toml</span>
<span class="line">└── src/</span>
<span class="line">    ├── main.rs</span>
<span class="line">    ├── lib.rs</span>
<span class="line">    ├── models.rs</span>
<span class="line">    ├── models/</span>
<span class="line">    │   ├── book.rs</span>
<span class="line">    │   ├── author.rs</span>
<span class="line">    │   └── category.rs</span>
<span class="line">    ├── services.rs</span>
<span class="line">    ├── services/</span>
<span class="line">    │   ├── library.rs</span>
<span class="line">    │   └── search.rs</span>
<span class="line">    └── utils.rs</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>试着自己实现这个结构，并理解模块之间的关系！</p><hr><p><strong>总结</strong>：Rust 的模块系统比 Python 更严格但也更安全。掌握 <code>mod.rs</code> 和现代模块组织方式，能让你的项目结构更清晰！🦀📚</p>`,109)])])}const o=n(l,[["render",i]]),d=JSON.parse('{"path":"/rust_p/06_others/%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3.html","title":"Rust 模块系统：单文件 vs 文件夹模块","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"一、单文件模块","slug":"一、单文件模块","link":"#一、单文件模块","children":[{"level":3,"title":"基本结构","slug":"基本结构","link":"#基本结构","children":[]},{"level":3,"title":"使用方式","slug":"使用方式","link":"#使用方式","children":[]}]},{"level":2,"title":"二、文件夹模块（使用 mod.rs）","slug":"二、文件夹模块-使用-mod-rs","link":"#二、文件夹模块-使用-mod-rs","children":[{"level":3,"title":"基本结构","slug":"基本结构-1","link":"#基本结构-1","children":[]},{"level":3,"title":"文件内容","slug":"文件内容","link":"#文件内容","children":[]}]},{"level":2,"title":"三、现代方式（Rust 2018+）：同名文件","slug":"三、现代方式-rust-2018-同名文件","link":"#三、现代方式-rust-2018-同名文件","children":[{"level":3,"title":"基本结构","slug":"基本结构-2","link":"#基本结构-2","children":[]},{"level":3,"title":"文件内容","slug":"文件内容-1","link":"#文件内容-1","children":[]}]},{"level":2,"title":"四、完整示例对比","slug":"四、完整示例对比","link":"#四、完整示例对比","children":[{"level":3,"title":"方式 1：使用 mod.rs（传统）","slug":"方式-1-使用-mod-rs-传统","link":"#方式-1-使用-mod-rs-传统","children":[]},{"level":3,"title":"方式 2：使用同名文件（现代）","slug":"方式-2-使用同名文件-现代","link":"#方式-2-使用同名文件-现代","children":[]}]},{"level":2,"title":"五、Rust vs Python 对比","slug":"五、rust-vs-python-对比","link":"#五、rust-vs-python-对比","children":[{"level":3,"title":"Python 的模块系统","slug":"python-的模块系统","link":"#python-的模块系统","children":[]},{"level":3,"title":"Rust 的模块系统（对应设计）","slug":"rust-的模块系统-对应设计","link":"#rust-的模块系统-对应设计","children":[]},{"level":3,"title":"详细对比表","slug":"详细对比表","link":"#详细对比表","children":[]}]},{"level":2,"title":"六、复杂项目实例","slug":"六、复杂项目实例","link":"#六、复杂项目实例","children":[{"level":3,"title":"Rust 项目结构","slug":"rust-项目结构","link":"#rust-项目结构","children":[]},{"level":3,"title":"各文件内容","slug":"各文件内容","link":"#各文件内容","children":[]}]},{"level":2,"title":"七、路径和导入","slug":"七、路径和导入","link":"#七、路径和导入","children":[{"level":3,"title":"绝对路径 vs 相对路径","slug":"绝对路径-vs-相对路径","link":"#绝对路径-vs-相对路径","children":[]},{"level":3,"title":"Python 对比","slug":"python-对比","link":"#python-对比","children":[]},{"level":3,"title":"Rust 路径关键字","slug":"rust-路径关键字","link":"#rust-路径关键字","children":[]}]},{"level":2,"title":"八、可见性控制","slug":"八、可见性控制","link":"#八、可见性控制","children":[{"level":3,"title":"Rust 的精细控制","slug":"rust-的精细控制","link":"#rust-的精细控制","children":[]},{"level":3,"title":"Python 的约定","slug":"python-的约定","link":"#python-的约定","children":[]}]},{"level":2,"title":"九、最佳实践","slug":"九、最佳实践","link":"#九、最佳实践","children":[{"level":3,"title":"✅ 推荐做法","slug":"✅-推荐做法","link":"#✅-推荐做法","children":[]},{"level":3,"title":"❌ 避免做法","slug":"❌-避免做法","link":"#❌-避免做法","children":[]}]},{"level":2,"title":"十、总结对比","slug":"十、总结对比","link":"#十、总结对比","children":[{"level":3,"title":"Rust 模块系统的优势","slug":"rust-模块系统的优势","link":"#rust-模块系统的优势","children":[]},{"level":3,"title":"Python 模块系统的优势","slug":"python-模块系统的优势","link":"#python-模块系统的优势","children":[]},{"level":3,"title":"相似之处","slug":"相似之处","link":"#相似之处","children":[]}]},{"level":2,"title":"实战练习","slug":"实战练习","link":"#实战练习","children":[]}],"git":{"updatedTime":1761491612000,"contributors":[{"name":"uponup","username":"uponup","email":"1030360567@qq.com","commits":1,"url":"https://github.com/uponup"}],"changelog":[{"hash":"5456040ee4b483f78ba6a68a1887ff67ab3316c6","time":1761491612000,"email":"1030360567@qq.com","author":"uponup","message":"fix rust"}]},"filePathRelative":"rust_p/06_others/模块系统详解.md"}');export{o as comp,d as data};
